### 请解释工作量证明（Proof of Work, PoW）的基本原理。为什么说 PoW 能确保区块链的安全性？



POW 就是给一个数学题，这种数学题没有固定的公式可以解答，只能不停的试。如果解出来了，就认为它做了足够的工作。

没有任何一个恶意的节点，可以保证，每次解题的速度都比区块链上其他节点都要快。如果篡改交易，不能保证交易在最长合法链上。



### 权益证明（Proof of Stake, PoS）与工作量证明（PoW）相比有哪些优缺点？

POW 需要浪费电力。如果是价值高的区块链网络使用 POW，那么慢慢的会出现 ASCI 芯片专门针对这种解题算法。从而形成霸权。

POS 是通过投票来决定的，票就是区块链上币的数量。省电。而且你要获得了区块链上半数的币，在有恶意行为，世界上所有人都知道了。那么该币的价值会大幅下降，对恶意节点本身的损害也很大。

POS 的过程比 POW 更快。



### 请描述委托权益证明（Delegated Proof of Stake, DPoS）的工作原理。它是如何提高区块链性能的？



在 POS 的基础上扩展，有谁更多的币，谁就有更多的票。如果节点平均有一万个币，但是一个新的节点只有一个。它也想投票，但是票数太少，不可能获得记账权。它可以把票委托给的节点持有，别的节点获得了记账权可以分给它一些激励。

如果有些节点，它的票过多，就能很轻松的实现每个区块的奖励。即使它是一个善意的节点。但是别的节点就永远获取不到记账权，获取不到出块奖励。



### 拜占庭容错（Byzantine Fault Tolerance, BFT）在区块链中的应用是什么？请给出一个使用 BFT 共识机制的区块链项目实例。

假设恶意的节点数量是 M，总的节点数量是 N。只要  N > 3M ，分布式系统就能形成共识。

也就是保证，在分布式系统中，有恶意节点的情况下，也能达成共识。

当节点的数量很多的时候，节点之间的互相通信的延迟就成了避不过去的问题。



Hyperledger Fabric ，EOS，Ripple 和 Stellar  使用了 BFT 机制。



### 什么是混合共识机制？请举例说明一种区块链使用的混合共识机制及其优点。

各种共识机制混合起来用。

Decred 使用了PoW 和 PoS 结合的混合共识机制。矿工挖矿，挖到之后节点投票来决定这个区块是否有效。

这不能优化区块链网络。当区块中有恶意行为，可以通过验证来决定是否接受这些区块。验证通过，就接受，沿着这个区块继续挖。不接受就抛弃，继续挖当前区块。



### FLP 不可能定理有什么实际意义？

在异步的分布式系统中，有节点挂掉。那么不可能有一个同时满足所有条件的共识算法。



这给分布式系统在现实世界的落地带来了可能性，现实世界，不可能所有的节点都是正常工作的。



### Paxos 算法的主要目的是什么？

在分布式系统张，让每个节点的状态达到一致，从而让系统的状态一致。



### Raft 算法如何简化了共识的过程？

raft 算法和 paxos 算法一样，意在解决分布式系统的数据一致性。

raft 将节点区分成3种。领导者（Leader）、跟随者（Follower）和候选人（Candidate）。领导者负责处理客户端请求和复制日志到其他节点；跟随者不主动发送请求，但会响应领导者和候选人的请求；候选人在选举领导者时充当发起者。

Raft算法通过选举和日志复制机制确保系统的安全性，即所有节点最终都能达成相同的日志状态。





### CAP 定理中的三个属性是什么？

强一致性（Consistency），可用性（Availability）和分区容错（Partition tolerance）。



CAP 定理说，一个分布式系统中，这三点不能同时实现。





### 在分布式系统中，什么是两阶段提交（2PC）？

类似于 MySQL 中的事务有二阶段提交一样，保证 binglog 和 redolog 的一致性。



分布式系统中的二阶段提交也是为了保证事务的一致性。先递交第一次，等所有节点都好了，在提交一次。



### 为什么说拜占庭容错（BFT）算法对区块链技术很重要？

可以保证区块链上的节点，即使有一部分是损坏或者恶意的。也能保证系统的正常运行。



### 解释什么是日志复制在 Raft 算法中的作用？

日志使用保证所有的节点状态一致。领导者节点把操作日志记录在本地，在向所有跟随着节点复制。一旦一定数量的跟随着节点复制好了日志，就认为状态就同步好了。





### 在选择共识算法时应考虑哪些关键因素？

选择 POW，后面肯定会有 ASIC 芯片出来。是否能接受，不能接受就选择 POS。

选择 POS，情况就好很多。可以承受比 POW 更大的吞吐量。

某些场景，必须选择 POA。公链是不能选 POA 的。



### 比特币使用的 PoW 算法如何解决记账的一致性问题？

解决数学题的过程，没有捷径。就是不停的试。这是公平的。



### PoW 算法中的「难度值」是如何工作的？

通过控制数学题中找到的 nonce 长度来控制计算难度。nonce 越长越难，出块时间越长。比特币把平均出块时间控制在了10分钟。





### 什么是权益证明（PoS）共识算法？

谁有这个区块链系统中的币，谁就有投票的票数。就能参与到投票当中。能源的消耗更小，交易速度更快。





### PoS 中的「币龄」是如何计算的？

币龄 = 持有的时间 * 持有币的数量。在使用这些币投票后，持币时间会重置。





### 描述 DPoS 共识算法的主要工作原理。

让手里票少的节点也能参与投票。把他们的票，集中在少数节点。





### PBFT 算法如何实现共识？

每个节点之间，不停的交换消息，从而达成共识。





### PBFT 算法中的「视图更换」是什么意思？

主节点挂掉了，从剩下的其他节点中，重新选一个主节点。





### Casper 共识算法与传统 PoS 有什么不同？

更加安全的 POS，限制手里票多的节点的恶意行为。

