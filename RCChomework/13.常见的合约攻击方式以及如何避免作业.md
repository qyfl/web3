### 什么是重入攻击，它是如何在智能合约中执行的？

类似于循环或者递归调用某个方法。在合约方法没有处理完之前，又重复调用该方法。该方法里如果没有把校验做到位，逻辑做的严谨一些，会有安全风险。



### 如何防止智能合约中的重入攻击？

1. 使用锁
2. 把状态的修改，余额的扣减等等操作放到前面来做，之后再做转账逻辑等。
3. 使用 transfer 或着 send，默认消耗 2300gas 并且不可以自定义。少用  call 方法，它可以自定义 gas 消耗。



### DAO 攻击是如何发生的，它与重入漏洞有什么关系？

the DAO 的一个智能合约有重入漏洞，被攻击了，被偷走了很多以太坊。最后导致了以太坊的硬分叉。



### 什么是整数溢出和下溢，它们如何影响智能合约？

uint256 长度是256位，如果是一个256 位的数字乘以10，就会溢出。从而导致金额计算错误。



### 如何在 Solidity 合约中防止整数溢出和下溢？

使用 safeMath 来进行数学计算



### 如何理解 Solidity 中的可见性关键字，并且它们的误用如何导致合约被攻击？

public 公开访问

private 只有本合约可以访问，子合约都不行

internal 只有本合约和子合约可以访问。

external 只有外部合约可以访问。



可见性的使用错误，会导致不该访问到的接口被访问到。会有安全风险。



### 什么是委托调用（`delegatecall`）和它的风险？

delegatecall 的上下本，是调用者的上下文。错误的使用会导致信息泄露甚至合约被恶意修改。不要轻易的使用 delegatecall 调用不清楚来源的合约。



### 什么是交易顺序依赖性，它如何被利用进行攻击？

在交易还没有打包进区块，还没有被发布到链上的时候。制造一个 gas 费更高的恶意的交易，使得更快的被打包发布到链上。这种攻击，非常依赖实时性。



### 在智能合约中如何安全地处理外部调用？

1. 把该做的校验，检查都做了。该改的数据，状态，余额，等等给改了在去调用。

2. 检查返回值。

   



### 如何利用以太坊的特性来增强智能合约的安全性？

1. 使用正确的修饰符，pure，view 等来减少不必要的风险。
2. 使用库里的工具
3. 关注最新的代码写法，新特性的增加。



### 什么是智能合约中的拒绝服务（DOS）攻击？

让智能合约无法对外提供服务，导致智能合约里的资产被永远锁死。

比如让合约执行某个方法所消耗的 gas 超过区块的 gas 限制，导致方法无法执行完成触发回滚。



### 描述一种可能导致智能合约 DOS 攻击的情况?

如果在遍历数组，让这个数组变得很大很大，消耗完所有的 gas 。触发回滚。



### 智能合约中的“所有者操作”是什么意思？它如何成为安全漏洞？

某些方法只有合约发布者能调用。如果发布者账号丢失，这个方法无法被执行。



### Solidity 中使用 `block.timestamp` 可能导致哪些安全问题？

block.timestamp 是由矿工写入的。如果合约里的一些逻辑依赖 block.timestamp，矿工可以在一定范围内修改这个值。



### 构造函数在 Solidity 中的命名与漏洞有何关联？

solidity 0.4.22 之前，构造函数不使用 construct，而是和合约名相同的方法。如果构造函数拼写错误，构造方法将会变成普通函数被外部调用。



### 什么是未初始化的存储指针漏洞？它如何影响智能合约？

未初始化的指针会随机的指向一个位置，可能会指向合约里的变量。



### 为什么在 Solidity 中不推荐使用 tx.origin 进行身份验证？

这个值是调用连的最初发起者，会被钓鱼调用攻击。调用者和本合约之间可能有其他的合约。错误的使用会导致逻辑误判。



### Solidity 不支持浮点数或定点数的后果是什么？

精度问题，比如 1/3 是除不尽的。会损失精度。



### 什么是“一次性地址”技术，它如何在以太坊上被利用？

通过椭圆曲线数字签名算法，可以验证派生的以太坊地址时候是交易者。



### 描述如何在智能合约中防止未授权的修改或访问。

该加权限控制的方法加上，该控制好权限的方法控制好权限。

不要把权限控制在一个人手里，使用多重签名的方式减少对个体的依赖。